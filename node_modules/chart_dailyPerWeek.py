import sys
import json
import numpy as np
import matplotlib.pyplot as plt
from matplotlib.ticker import FixedLocator, FixedFormatter

# vals = "1_0_1_-1_-1_-1_1"
vals = sys.argv[1]

tmp = vals.split("_")

stats = list(map(float, tmp))

plt.rc('font', family='NanumGothicOTF', size=11, style="normal", weight=500)

label = ["1일차", "2일차", "3일차", "4일차", "5일차", "6일차", "7일차"]

fig = plt.figure(figsize=(8.3, 4))
ax = plt.gca()
plt.plot(label, stats, marker='o', ms=10, color="darkblue", alpha=0.8)
ax.set_facecolor('#FAFAFA')
ax.set_title("당신의 최근 일주일 기분 변화는?", color='black', y=1.05, weight=600, size=15)
ax.set_ylim(-1.8,1.8)

plt.yticks(fontsize=14, weight=500)
plt.xticks(fontsize=13, weight=500)

y_formatter = FixedFormatter(["좋음", "보통", "나쁨"])
y_locator = FixedLocator([1, 0, -1])
ax.tick_params(bottom=True, top=False, left=False, right=False)
ax.yaxis.set_major_formatter(y_formatter)
ax.yaxis.set_major_locator(y_locator)
plt.savefig(f'../public/image/dailyPerWeek_{vals}.png', bbox_inches='tight', pad_inches=0.3)

# client = pymongo.MongoClient(
#     "mongodb+srv://happy:pEMnb4TALrXfBqli@cluster0.53v0t.mongodb.net/howru?retryWrites=true")
# db = client.howru
# data = db.users.find_one({"id": id})

# print(f'image/PHQ_{vals}.png')
